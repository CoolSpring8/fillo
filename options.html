
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Fillo – Settings</title>
  <link rel="stylesheet" href="options.css" />
</head>
<body>
  <header class="appbar" role="banner">
    <div class="appbar__left">
      <h1 class="appbar__title">Fillo Settings</h1>
      <span class="appbar__subtitle">Configure providers, autofill, and profiles.</span>
    </div>
    <div class="appbar__right">
      <div id="setupProgress" class="progress-indicator" aria-live="polite" title="Setup progress">
        <span id="progressCount">0/2</span> complete
      </div>
      <button id="primaryImportBtn" class="btn btn--primary" disabled>
        Import resume
      </button>
    </div>
  </header>

  <div class="layout">
    <aside class="sidenav" aria-label="Settings sections">
      <nav>
        <a class="sidenav__link" href="#section-setup">Getting started</a>
        <a class="sidenav__link" href="#section-provider">AI provider</a>
        <a class="sidenav__link" href="#section-autofill">Autofill</a>
        <a class="sidenav__link" href="#section-profiles">Profiles</a>
        <a class="sidenav__link" href="#section-advanced">Advanced</a>
      </nav>
      <div class="sidenav__meta">
        <div>Version <span id="appVersion">—</span></div>
      </div>
    </aside>

    <main class="content" role="main">
      <!-- Setup Checklist -->
      <section id="section-setup" class="card">
        <header class="card__header">
          <h2>Getting started</h2>
        </header>
        <div class="card__body">
          <ol class="checklist">
            <li class="checklist__item">
              <input id="chkProvider" type="checkbox" disabled>
              <label for="chkProvider"><strong>Connect an AI provider</strong> — pick Chrome on‑device, OpenAI, or Gemini.</label>
              <button class="btn btn--small btn--link" data-scroll="#section-provider">Open section</button>
            </li>
            <li class="checklist__item">
              <input id="chkFirstProfile" type="checkbox" disabled>
              <label for="chkFirstProfile"><strong>Create your first profile</strong> — upload a PDF resume and let Fillo parse it.</label>
              <button class="btn btn--small btn--link" data-scroll="#section-profiles">Open section</button>
            </li>
          </ol>
          <p class="muted">Tip: you can open Settings in a full tab for more space by setting <code>open_in_tab: true</code> in your <code>manifest.json</code>.</p>
        </div>
      </section>

      <!-- Provider Section -->
      <section id="section-provider" class="card">
        <header class="card__header">
          <h2>AI provider</h2>
          <p class="muted">Choose a provider for resume parsing and autofill guidance.</p>
        </header>
        <div class="card__body">
          <fieldset class="provider">
            <legend class="sr-only">Provider</legend>
            <label class="provider__row">
              <input type="radio" name="provider" value="chrome" />
              <div class="provider__content">
                <div class="provider__title">Chrome on‑device (Prompt API)</div>
                <div class="provider__desc">Private, runs locally. No API key required.</div>
                <div class="provider__actions">
                  <button id="btnChromeVerify" class="btn btn--small">Verify model</button>
                  <span id="chromeStatus" class="badge">Not verified</span>
                </div>
              </div>
            </label>

            <label class="provider__row">
              <input type="radio" name="provider" value="openai" />
              <div class="provider__content">
                <div class="provider__title">OpenAI</div>
                <div class="provider__desc">Use your API key. Keys are stored locally.</div>
                <div class="provider__actions provider__grid">
                  <label class="field">
                    <span class="field__label">API key</span>
                    <input id="openaiKey" class="field__input" type="password" placeholder="sk-..." autocomplete="off">
                  </label>
                  <label class="field">
                    <span class="field__label">Base URL (optional)</span>
                    <input id="openaiBaseUrl" class="field__input" type="url" placeholder="https://api.openai.com">
                  </label>
                  <button id="btnOpenAiSave" class="btn btn--small">Save</button>
                  <span id="openaiStatus" class="badge">Not saved</span>
                </div>
              </div>
            </label>

            <label class="provider__row">
              <input type="radio" name="provider" value="gemini" />
              <div class="provider__content">
                <div class="provider__title">Gemini</div>
                <div class="provider__desc">Use your API key.</div>
                <div class="provider__actions provider__grid">
                  <label class="field">
                    <span class="field__label">API key</span>
                    <input id="geminiKey" class="field__input" type="password" placeholder="AIza..." autocomplete="off">
                  </label>
                  <button id="btnGeminiSave" class="btn btn--small">Save</button>
                  <span id="geminiStatus" class="badge">Not saved</span>
                </div>
              </div>
            </label>
          </fieldset>
        </div>
      </section>

      <!-- Autofill Section -->
      <section id="section-autofill" class="card">
        <header class="card__header">
          <h2>Autofill</h2>
          <p class="muted">Fine‑tune how Fillo behaves during guided form filling.</p>
        </header>
        <div class="card__body grid grid--2">
          <fieldset class="card card--sub">
            <legend class="card__header--row"><strong>Field adapters</strong></legend>
            <div class="card__body">
              <label class="check">
                <input id="adapterEn" type="checkbox" checked /> English (default)
              </label>
              <label class="check">
                <input id="adapterZh" type="checkbox" /> Chinese (Simplified)
              </label>
              <p class="muted">All matching runs locally.</p>
            </div>
          </fieldset>

          <fieldset class="card card--sub">
            <legend class="card__header--row"><strong>Auto‑fill behavior</strong></legend>
            <div class="card__body">
              <label class="radio">
                <input name="autofill" type="radio" value="auto" checked /> Skip issues and continue automatically
              </label>
              <label class="radio">
                <input name="autofill" type="radio" value="pause" /> Pause for manual review
              </label>
            </div>
          </fieldset>

          <fieldset class="card card--sub">
            <legend class="card__header--row"><strong>Highlight overlay</strong></legend>
            <div class="card__body">
              <label class="switch">
                <input id="toggleHighlight" type="checkbox" checked />
                <span class="switch__slider" aria-hidden="true"></span>
                <span class="switch__label">Show focused field highlight</span>
              </label>
              <p class="muted">The overlay will surround fields while prompts are shown.</p>
            </div>
          </fieldset>
        </div>
      </section>

      <!-- Profiles Section -->
      <section id="section-profiles" class="card">
        <header class="card__header">
          <h2>Profiles</h2>
          <p class="muted">Upload a resume and parse it with your configured AI provider.</p>
        </header>
        <div class="card__body">
          <div id="profilesGate" class="gate" role="note" aria-live="polite">
            <div class="gate__content">
              <strong>Connect an AI provider first</strong>
              <p class="muted">Profiles are disabled until a provider is configured.</p>
              <button class="btn btn--primary" data-scroll="#section-provider">Configure provider</button>
            </div>
          </div>

          <div id="profilesEnabled" class="hidden">
            <div class="u-flex u-gap">
              <div class="upload drop" id="dropzone" aria-label="Upload resume PDF">
                <input id="resumeFile" type="file" accept=".pdf,.doc,.docx" />
                <div class="drop__hint">
                  <div class="drop__title">Select or drop a resume</div>
                  <div class="drop__sub">PDF or DOCX • We’ll parse it using your provider</div>
                </div>
              </div>
              <div class="parse-actions">
                <button id="btnParse" class="btn btn--primary" disabled>Run AI parsing</button>
                <button id="btnReparse" class="btn" disabled>Re-run parsing</button>
                <div id="parseStatus" class="muted" role="status" aria-live="polite">No file selected.</div>
              </div>
            </div>

            <hr class="divider" />

            <form id="profileForm" class="form-grid" autocomplete="off">
              <fieldset class="form-grid__section">
                <legend>Basics</legend>
                <label class="field span-6">
                  <span class="field__label">Full name</span>
                  <input id="fullName" class="field__input" type="text" placeholder="Jane Doe" />
                </label>
                <label class="field span-6">
                  <span class="field__label">Title or label</span>
                  <input id="title" class="field__input" type="text" placeholder="Senior Engineer" />
                </label>
                <label class="field span-6">
                  <span class="field__label">Email</span>
                  <input id="email" class="field__input" type="email" placeholder="jane@example.com" />
                </label>
                <label class="field span-6">
                  <span class="field__label">Phone</span>
                  <input id="phone" class="field__input" type="tel" placeholder="+1 555 123 4567" />
                </label>
                <label class="field span-6">
                  <span class="field__label">Website</span>
                  <input id="website" class="field__input" type="url" placeholder="https://example.com" />
                </label>
                <label class="field span-6">
                  <span class="field__label">Avatar URL</span>
                  <input id="avatar" class="field__input" type="url" placeholder="https://..." />
                </label>
                <label class="field span-12">
                  <span class="field__label">Summary</span>
                  <textarea id="summary" class="field__input" rows="4" placeholder="Short professional summary..."></textarea>
                </label>
              </fieldset>

              <fieldset class="form-grid__section">
                <legend>Meta</legend>
                <label class="field span-6">
                  <span class="field__label">Location</span>
                  <input id="location" class="field__input" type="text" placeholder="City, Country" />
                </label>
                <label class="field span-6">
                  <span class="field__label">Canonical URL</span>
                  <input id="canonical" class="field__input" type="url" placeholder="https://example.com/resume" />
                </label>
                <label class="field span-6">
                  <span class="field__label">Version</span>
                  <input id="version" class="field__input" type="text" placeholder="v1.0.0" />
                </label>
                <label class="field span-6">
                  <span class="field__label">Last modified</span>
                  <input id="lastModified" class="field__input" type="date" />
                </label>
              </fieldset>

              <div class="form-actions">
                <button id="btnReset" type="button" class="btn">Reset changes</button>
                <button id="btnSave" type="button" class="btn btn--primary">Save changes</button>
              </div>
            </form>
          </div>
        </div>
      </section>

      <!-- Advanced Section -->
      <section id="section-advanced" class="card">
        <header class="card__header">
          <h2>Advanced</h2>
        </header>
        <div class="card__body">
          <label class="check">
            <input id="collectDebug" type="checkbox" />
            Enable debug logs (saved locally)
          </label>
          <button id="btnExport" class="btn btn--small">Export settings</button>
          <button id="btnImport" class="btn btn--small">Import settings</button>
          <input id="importFile" type="file" class="hidden" accept="application/json" />
        </div>
      </section>
    </main>
  </div>

  <!-- Toasts -->
  <div id="toasts" class="toasts" aria-live="polite" aria-atomic="true"></div>

  <script src="options.js"></script>
</body>
</html>
